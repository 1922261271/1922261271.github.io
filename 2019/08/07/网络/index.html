<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="网络定义将位于不同位置的计算机用不同的传输介质（有线、无线）、不同的网络设备连接起来，通过一些网络软件，最终实现资源共享的系统。
发展1946第一台计算机（飞机订票）
20世纪6、70年代第二代多个主机通信（美国军方阿帕网）NCP协议（传输控制）
70-90年代第三代开放式的标准化计算机网络 ISO">
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="网络">
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="你好">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>网络 - 你好</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2019/08/07/网络/">
                网络
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-08-07</span>
            
            
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <a id="more"></a>

<h1 id="网络定义"><a href="#网络定义" class="headerlink" title="网络定义"></a>网络定义</h1><p>将位于不同位置的计算机用不同的传输介质（有线、无线）、不同的网络设备连接起来，通过一些网络软件，最终实现资源共享的系统。</p>
<h5 id="发展"><a href="#发展" class="headerlink" title="发展"></a>发展</h5><p>1946第一台计算机（飞机订票）</p>
<p>20世纪6、70年代第二代多个主机通信（美国军方阿帕网）NCP协议（传输控制）</p>
<p>70-90年代第三代开放式的标准化计算机网络 ISO（国际化标准组织）1984年颁布OSI模型</p>
<p>90年代末至今第四代高速网络技术阶段（Internet网）互联网</p>
<h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><h6 id="局域网（LAN）"><a href="#局域网（LAN）" class="headerlink" title="局域网（LAN）"></a>局域网（LAN）</h6><h6 id="广域网（WAN）"><a href="#广域网（WAN）" class="headerlink" title="广域网（WAN）"></a>广域网（WAN）</h6><h6 id="城域网（MAN）"><a href="#城域网（MAN）" class="headerlink" title="城域网（MAN）"></a>城域网（MAN）</h6><h1 id="思科设备"><a href="#思科设备" class="headerlink" title="思科设备"></a>思科设备</h1><h2 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h2><h6 id="启动过程"><a href="#启动过程" class="headerlink" title="启动过程"></a>启动过程</h6><ol>
<li><p>硬件检查</p>
</li>
<li><p>运行IOS</p>
</li>
<li><p>导入配置文件。</p>
<h6 id="详细过程"><a href="#详细过程" class="headerlink" title="详细过程"></a>详细过程</h6><p> 1.路由器加电后，首先运行ROM中的POST程序（Power On Self Test）对路由器的硬件进行检测，俗称加电自检。</p>
<ol start="2">
<li><p>检测通过后紧接着执行ROM中的引导程序（bootstrap），并根据寄存器值（register）来决定启动方式。</p>
<p>寄存器值的格式为：0x21YZ</p>
<p>Y列的状态：0x210Z    从nvram加载配置文件 </p>
<pre><code>0x214Z    不从nvram加载配置文件</code></pre><p>Z列的状态：0x21Y0   从rommon启动   提示符为：&gt;(路由器启动时按Ctrl+Break) </p>
<pre><code>0x21Y1   从mini ios启动  提示符为：Router(boot)&gt; 
 0x21Y2   从flash启动    提示符为：Router&gt; </code></pre><p> 我们经常使用的两个寄存器值：0x2102 （正常），0x2142（不读取保存的配置）。</p>
</li>
<li><p>如果正常启动，则按引导程序到Flash中查找IOS镜像。如果找到IOS镜像，则读取后正常启动。如果没有找到IOS镜像，则进入boot模式，即Mini IOS启动。boot模式下可使用TFTP上的IOS；或使用TFTP/X-modem为路由器重新灌一个IOS。如果Mini IOS也启动失败，则进入rom monitor模式。</p>
</li>
<li><p>读取IOS并初始化成功后，引导程序将更具寄存器值决定加载或者不加载启动配置文件。如果选择加载，则到NVRAM中找到启动配置文件，并加载到RAM中成为运行配置文件。如果选择不加载或者根本没有启动配置文件，则路由器会进入询问配置模式，以问答的方式对路由器进行基本配置。</p>
</li>
<li><p>进入用户模式，启动过程完毕</p>
</li>
<li><p>如果设置的密码忘记了：路由器启动时按Ctrl+Break</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rommon 1 &gt; confreg 0x2142 不读取保存的配置</span><br><span class="line">rommon 1 &gt; reset 重置</span><br><span class="line">rommon 1 &gt; confreg 0x2102 正常</span><br><span class="line">rommon 1 &gt; reset</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>
<h6 id="启动过程-1"><a href="#启动过程-1" class="headerlink" title="启动过程"></a>启动过程</h6><ul>
<li><p>ROM ：只读存储器是一个用于维护路由器的硬件，它存储着POST程序，bootstrap程序，以及Mini IOS。</p>
</li>
<li><p>Flash：它是用来存储路由器完整IOS镜像的硬件。IOS就相当于思科路由器的操作系统，没有IOS或者IOS镜像损坏的路由器是无法工作的。</p>
</li>
<li><p>NVRAM： 是用于存放路由器的启动配置文件（Startup-config）的硬件。路由器启动前最后一次保存的配置都储存在这里。</p>
</li>
<li><p>RAM： 存储路由器启动时由启动配置文件拷贝而来的运行配置文件（Running-config），解压后的IOS以及学习到的路由表（Routing-table）和包队列。</p>
</li>
</ul>
<h6 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Router&gt;en 用户模式</span><br><span class="line">Router#conf t 特权模式</span><br><span class="line">Router(config)#int f0/0 全局模式</span><br><span class="line">Router(config-if)# 接口模式</span><br></pre></td></tr></table></figure>

<p>（1）用户模式：默认情况下，第一次访问交换机用户进入的就是用户模式，在此模式下只能进行很有限的操作，如只能用来查看一些统计信息。</p>
<p>（2）特权模式：在特权模式下，有检查、配置、调试等所有权限，除了具体到端口的配置，其他的基本都可以在此模式下完成。</p>
<p>（3）全局配置模式：该配置模式下配置的内容都将作用于全局。</p>
<p>（4）接口模式：作用于具体某一子接口，需要配置具体的内容就需要进入相应的子配置模式。</p>
<p>特权模式加密：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">enable password 123456 明文密码</span><br><span class="line">enable secret 123456 密文密码</span><br></pre></td></tr></table></figure>

<h2 id="远程加密："><a href="#远程加密：" class="headerlink" title="远程加密："></a>远程加密：</h2><h6 id="Telnet："><a href="#Telnet：" class="headerlink" title="Telnet："></a>Telnet：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Router(config)#username lx password 123456 创建用户</span><br><span class="line">Router(config)#line vty 0 4 创建五个远程虚拟接口</span><br><span class="line">Router(config-line)#password 123456</span><br><span class="line">Router(config-line)#login 允许远程登录</span><br><span class="line">Router(config-line)#login local  运用本地用户</span><br><span class="line">验证：telnet+ip</span><br></pre></td></tr></table></figure>

<h6 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Router(config)#username lx password 123456</span><br><span class="line">Router(config)#ip domain-name lx.com 创建域名</span><br><span class="line">Router(config)#hostname lx </span><br><span class="line">Router(config)#crypto key generate rsa 启用rsa加密</span><br><span class="line">How many bits in the modulus [512]: 1024 1024位密码</span><br><span class="line">lx(config)#line vty 0 4</span><br><span class="line">lx(config-line)#exec-timeout  10 10 连接超时时间10分10秒</span><br><span class="line">lx(config-line)#logging synchronous 日志同步</span><br><span class="line">lx(config-line)#login local </span><br><span class="line">lx(config-line)#transport input ssh 只启用ssh</span><br><span class="line">验证：ssh -l +用户+IP</span><br></pre></td></tr></table></figure>

<h2 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h2><p>工作在数据链路层</p>
<p>分割冲突域，全双工通信，存储，过滤转发，差错控制，成帧，流量控制</p>
<h6 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">转发 学习（mac300s过期） 广播 更新 封装成帧</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">802.3</span><br><span class="line">802.2</span><br><span class="line">MAC 48位 16进制</span><br><span class="line">前24位为厂商 后24位网卡信息</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/006ZIQqwgy1g9mryvgm8gj30gv065wfk.jpg" alt="1575440379630"></p>
<h6 id="基本配置-1"><a href="#基本配置-1" class="headerlink" title="基本配置"></a>基本配置</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">所有接口默认在一个网络（VLAN 1）</span><br><span class="line">show vlan brief</span><br></pre></td></tr></table></figure>

<h6 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">傻瓜交换机不能配置</span><br><span class="line">可管理交换机：二次 三层（带路由功能）</span><br></pre></td></tr></table></figure>

<h6 id="VLAN技术"><a href="#VLAN技术" class="headerlink" title="VLAN技术"></a>VLAN技术</h6><p>（虚拟局域网）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">基于端口</span><br><span class="line">基于MAC</span><br><span class="line">基于协议</span><br><span class="line">根据IP组播划分</span><br><span class="line">基于策略</span><br><span class="line">按用户定义</span><br></pre></td></tr></table></figure>

<h5 id="不同VLAN通信"><a href="#不同VLAN通信" class="headerlink" title="不同VLAN通信"></a>不同VLAN通信</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">需要使用trunk【vlan中继协议】技术</span><br><span class="line">trunk中继协议 802.1q 封装插入4个字节的标签（VLAN）</span><br><span class="line">1）封装 </span><br><span class="line">      ISL（思科私有）：是在数据帧前加26字节，尾加4字节</span><br><span class="line">      802.1Q（工业标准）：是在数据帧中插入4字节，打标签</span><br><span class="line">      802.1Q Native Vlan：默认vlan1不打标，作管理用</span><br><span class="line"></span><br><span class="line">  （2）模式</span><br><span class="line">      Mode          DTP send     DTP Response</span><br><span class="line">    ------------------------------------------------</span><br><span class="line">     Access           -           -</span><br><span class="line">     Trunk            Y           Y           </span><br><span class="line">     Desirable         Y           Y       企望    </span><br><span class="line">     Auto （默认）      N           Y      自动</span><br><span class="line">     Nonegotiate       N           N     不协商</span><br></pre></td></tr></table></figure>

<h6 id="1-三层交换机"><a href="#1-三层交换机" class="headerlink" title="1.三层交换机"></a>1.三层交换机</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">使用三层交换机，配置SVI虚拟接口作为不同vlan网关，并开启路由功能来实现</span><br><span class="line">第一步：划vlan</span><br><span class="line">Sw3(config)#vlan 10</span><br><span class="line">Sw3(config-vlan)#name rsb</span><br><span class="line">Sw3(config-vlan)#vlan 20</span><br><span class="line">Sw3(config-vlan)#name xsb</span><br><span class="line">Sw3(config-vlan)#exit</span><br><span class="line">第二步：</span><br><span class="line">Sw3(config)#int f0/23</span><br><span class="line">Sw3(config-if)#switchport trunk encapsulation dot1q </span><br><span class="line">Sw3(config-if)#sw mo trunk</span><br><span class="line">第三步：</span><br><span class="line">Sw3(config-if)#exit</span><br><span class="line">Sw3(config)#ip routing</span><br><span class="line">第四步：</span><br><span class="line">Sw3(config)#int vlan 10</span><br><span class="line">Sw3(config-if)#ip add 192.168.10.254 255.255.255.0</span><br><span class="line">Sw3(config-if)#exit</span><br><span class="line">Sw3(config)#int vlan 20</span><br><span class="line">ip add 192.168.20.254 255.255.255.0</span><br><span class="line">第五步：为PC机配置网关地址</span><br><span class="line">检查配置是否正确</span><br><span class="line">Sw3#sh vlan brief</span><br><span class="line">Sw3#sh interfaces trunk </span><br><span class="line">Sw2#sh running-config</span><br></pre></td></tr></table></figure>

<h6 id="2-单臂路由"><a href="#2-单臂路由" class="headerlink" title="2.单臂路由"></a>2.单臂路由</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">开启端口</span><br><span class="line">R1(config)#int f0/0</span><br><span class="line">R1(config-if)#no shutdown</span><br><span class="line">开启子接口，封装为trunk，并设置IP地址作为对应vlan的网关</span><br><span class="line">R1(config)#int f0/0.10</span><br><span class="line">R1(config-subif)#encapsulation dot1Q 10  封装并作为vlan 10的网关</span><br><span class="line">R1(config-subif)#ip add 192.168.10.254 255.255.255.0</span><br><span class="line">R1(config)#int f0/0.20</span><br><span class="line">R1(config-subif)#encapsulation dot1Q 20</span><br><span class="line">R1(config-subif)#ip add 192.168.20.254 255.255.255.0</span><br></pre></td></tr></table></figure>

<h6 id="端口安全"><a href="#端口安全" class="headerlink" title="端口安全"></a>端口安全</h6><p>交换机攻击方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">1.VLAN 跳跃攻击</span><br><span class="line">2.生成树攻击</span><br><span class="line">3.MAC表泛洪（广播）</span><br><span class="line">	解决：数量限制</span><br><span class="line">		限制MAC（绑定） </span><br><span class="line">		Switch(config-if)#switchport port-security ?</span><br><span class="line">		mac-address  </span><br><span class="line">  		maximum      最大数量（利用集线器测试）</span><br><span class="line">  		violation    处理方式</span><br><span class="line">		Switch(config-if)#switchport port-security violation ?</span><br><span class="line">  		protect   保护</span><br><span class="line">  		restrict  限制（丢弃）</span><br><span class="line">  		shutdown  关闭</span><br><span class="line">		Switch(config-if)#switchport mo ac 需要将链路设置为access</span><br><span class="line">		Switch(config-if)#switchport port-security 开启端口安全</span><br><span class="line">		Switch(config-if)#switchport port-security mac-address 00D0.FFCD.EA80 绑定MAC</span><br><span class="line">		Switch(config-if)#switchport port-security violation shutdown 处理方式为shutdown</span><br><span class="line">		当加入其它的MAC地址是链路会断开，如果需要通信则需要先shutdown再no shutdown</span><br><span class="line">		</span><br><span class="line">4.ARP攻击</span><br><span class="line">5.VTP攻击（是VLAN中继协议，也被称为虚拟局域网干道协议）VLAN同步技术</span><br><span class="line">	域名同步</span><br><span class="line">	密码</span><br><span class="line">	修订版本号 同步修改次数大的S</span><br><span class="line">	服务器（S）、客户端（C）、透明（T转发但不同步）</span><br><span class="line">	模式</span><br><span class="line">	Switch(config)#vtp mode ?</span><br><span class="line">  	client       #C 不能创建VLAN</span><br><span class="line">  	server       #S</span><br><span class="line">  	transparent  #T</span><br><span class="line">	</span><br><span class="line">	SW1(config)#vtp ?</span><br><span class="line">  domain    域名	#需要统一域名下才能同步（T可以不用设置）</span><br><span class="line">  mode      模式·	</span><br><span class="line">  password  密码  #需要统一密码下才能同步（T可以不用设置）如果不设置密码随便一台交换机连入都会自动同步为S并且可以修改</span><br><span class="line">  version   #版本</span><br><span class="line">  SW1(config)#vtp domain lx		#S、C需要在同一域名</span><br><span class="line">Changing VTP domain name from NULL to lx</span><br></pre></td></tr></table></figure>

<h2 id="STP生成树协议"><a href="#STP生成树协议" class="headerlink" title="STP生成树协议"></a>STP生成树协议</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">解决环路，备份，负载均衡</span><br></pre></td></tr></table></figure>

<h6 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h6><p>​    通过BPDU（桥协议单元）交换STP信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BUDP类型</span><br><span class="line">1.开始</span><br><span class="line">2.链路状态变化</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">第一步：选择根网桥（root ID）</span><br><span class="line">	BID：优先级（默认32768= 8*4096）+MAC地址（小的优先级高）</span><br><span class="line">	Root ID    Priority    32769 （默认 + VLAN号）</span><br><span class="line">	Switch#show version   #看MAC</span><br><span class="line">	Base ethernet MAC Address       : 0002.4A69.CB52</span><br><span class="line">第二步：选择根端口</span><br><span class="line">	cost值</span><br><span class="line">	f（100M） 19</span><br><span class="line">	10M		100</span><br><span class="line">	1G		4</span><br><span class="line">	10G		2</span><br><span class="line">	对端网桥BID</span><br><span class="line">	对端端口优先级（128）</span><br><span class="line">第三步：选择指定端口</span><br><span class="line">	根桥上全是指定端口</span><br><span class="line">	路径成本</span><br><span class="line">	端口的网桥的（BID）</span><br><span class="line">	端口优先级 #默认128</span><br><span class="line">		Switch(config)#int f0/1</span><br><span class="line">		Switch(config-if)#spanning-tree vlan 10 port-priority 32 #16的倍数</span><br><span class="line">第四步：阻塞端口</span><br></pre></td></tr></table></figure>

<h6 id="端口状态"><a href="#端口状态" class="headerlink" title="端口状态"></a>端口状态</h6><p><img src="https://tvax1.sinaimg.cn/large/006ZIQqwgy1g9ms4dtr3xj30g705s3yx.jpg" alt="1575528655926"></p>
<h6 id="PVST"><a href="#PVST" class="headerlink" title="PVST"></a>PVST</h6><p>按VLAN生成树生成一棵VLAN树 #默认vlan1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">让SW1作vlan10的根桥，SW2作Vlan10的备份根桥。</span><br><span class="line">SW1(config)#spanning-tree vlan 10 root primary  #24576</span><br><span class="line">SW2(config)#spanning-tree vlan 10 root secondary #28672</span><br><span class="line">这样做可以将所有链路都利用起来。并实现负载均衡和链路备份。</span><br></pre></td></tr></table></figure>

<h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><p>动态主机配置协议，作用就是为客户端自动分配IP地址。</p>
<h6 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">客户端广播发出Discover报文</span><br><span class="line">所有server收到报文并作出回应offer报文</span><br><span class="line">客服端只处理一个offer报文，客户端发出选中的地址</span><br><span class="line">server判断IP是否符合并发出ACK</span><br><span class="line">客户端检查ip能否使用</span><br><span class="line">成功获取</span><br><span class="line">ipconfig/release  主动释放IP</span><br><span class="line">ipconfig/renew  从新租约IP</span><br></pre></td></tr></table></figure>

<h6 id="三层设备"><a href="#三层设备" class="headerlink" title="三层设备"></a>三层设备</h6><p>路由器，三层交换机</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">R1#config t</span><br><span class="line">R1(config)#ip dhcp pool vlan10     #地址池名</span><br><span class="line">R1(dhcp-config)#network 192.168.10.0 255.255.255.0   #地址范围</span><br><span class="line">R1(dhcp-config)#default-router 192.168.10.254     #网关地址</span><br><span class="line">R1(dhcp-config)#dns-server 61.139.2.69          # DNS地址</span><br><span class="line">R1(dhcp-config)#exit</span><br><span class="line">R1(config)#ip dhcp excluded-address 192.168.10.1 192.168.10.10   排除地址</span><br></pre></td></tr></table></figure>

<h6 id="有DHCP服务器"><a href="#有DHCP服务器" class="headerlink" title="有DHCP服务器"></a>有DHCP服务器</h6><p>在服务器上配置地址池开启服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Sw3(config)#int vlan 10</span><br><span class="line">Sw3(config-if)#ip helper-address 192.168.100.1 服务器地址</span><br></pre></td></tr></table></figure>

<h2 id="链路聚合"><a href="#链路聚合" class="headerlink" title="链路聚合"></a>链路聚合</h2><p>可以增加冗余链路，带宽，实现负载均衡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">开启聚合端口编号为1： interface port-channel 1 #1-6接口</span><br><span class="line">三层交换机需要封装：sw tr en do</span><br><span class="line">switchport mode trunk</span><br><span class="line">选择接口：interface range f0/7-6</span><br><span class="line">选泽模式：channel-group 1 mode on</span><br><span class="line">	active Enable LACP unconditionally #主动</span><br><span class="line">	auto Enable PAgP only if a PAgP device is detected#被动</span><br><span class="line">	desirable Enable PAgP unconditionally#主动</span><br><span class="line">	on Enable Etherchannel only#单独 手动设置</span><br><span class="line">	passive Enable LACP only if a LACP device is detected被动</span><br><span class="line">查看：SW3#show interfaces etherchannel</span><br><span class="line">	SW3#show etherchannel port-channel </span><br><span class="line">	#如果先聚合再设置的trunk保存重启即可</span><br></pre></td></tr></table></figure>

<p><img src="https://tva2.sinaimg.cn/large/006ZIQqwgy1g9ms554cznj30jc0a0mxc.jpg" alt="1575533823409"></p>
<h2 id="HSRP网关份路由"><a href="#HSRP网关份路由" class="headerlink" title="HSRP网关份路由"></a>HSRP网关份路由</h2><p>HSRP思科私有 #热备份路由协议</p>
<p>VRRP #标准</p>
<p>两个交换机进行网关备份</p>
<p>两个交换机分别设置网关，一个备份，优先级高的会使用，但是用的是standby设置的虚拟地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int vlan 10</span><br><span class="line">standby 10 ip 172.16.15.120 #两个网关虚拟的（PC上输的网关）</span><br><span class="line">standby 10 priority 120 #优先级默认为100</span><br><span class="line">standby 10 preempt #设置为抢占</span><br><span class="line">standby times 3 10hello #时间和保持时间</span><br><span class="line">standby 10 track FastEthernet0/3 #链接的端口</span><br></pre></td></tr></table></figure>

<h1 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h1><img src="https://tva3.sinaimg.cn/large/006ZIQqwgy1g9ms5y9ealj305k04zdfw.jpg" alt="006ZIQqwgy1g9jyu9vc95j30dr0ccwj8" style="zoom:150%;">

<h4 id="物理层（比特）"><a href="#物理层（比特）" class="headerlink" title="物理层（比特）"></a>物理层（比特）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">功能：	建立、维护、断开物理连接。</span><br><span class="line">完成相邻结点之间原始比特流的传输</span><br><span class="line">光纤：光信号（光猫）</span><br><span class="line">双绞线：数字信号</span><br><span class="line">电话线：Modena（调制解调器）模拟信号</span><br></pre></td></tr></table></figure>

<h4 id="数据链路层（帧）"><a href="#数据链路层（帧）" class="headerlink" title="数据链路层（帧）"></a>数据链路层（帧）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">建立逻辑连接、进行硬件地址寻址、差错校验等功能。（由底层网络定义协议）</span><br><span class="line">将比特组合成字节进而组合成帧，用MAC地址访问介质，错误发现但不能纠正。</span><br></pre></td></tr></table></figure>

<h4 id="网络层（包）"><a href="#网络层（包）" class="headerlink" title="网络层（包）"></a>网络层（包）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">进行逻辑地址寻址，实现不同网络之间的路径选择。</span><br></pre></td></tr></table></figure>

<h4 id="传输层（数据段）"><a href="#传输层（数据段）" class="headerlink" title="传输层（数据段）"></a>传输层（数据段）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">定义传输数据的协议端口号，以及流控和差错校验。</span><br><span class="line">区分不同的上层应用</span><br><span class="line">建立应用程序间的端到端连接</span><br><span class="line">定义流量控制 </span><br><span class="line">为数据传输提供可靠或不可靠的连接服务</span><br></pre></td></tr></table></figure>

<h4 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主要为两个会话层实体进行会话而进行的对话连接的管理服务。 </span><br><span class="line">会话层的主要功能：建立会话，拆除会话等会话管理服务</span><br><span class="line">端到端的连接状态</span><br></pre></td></tr></table></figure>

<h4 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主要功能是数据如何被表示。如文字、图形、声音的表示。</span><br><span class="line"> 另外，数据压缩、数据加密等工作都是由表示层负责处理。</span><br></pre></td></tr></table></figure>

<h4 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主要功能是完成用户与应用程序之间的接口。</span><br><span class="line">如Telnet、HTTP、FTP等</span><br></pre></td></tr></table></figure>

<h6 id="分成的好处"><a href="#分成的好处" class="headerlink" title="分成的好处"></a>分成的好处</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.每次独立，防止对某一层所做的改动影响到其他的层,这样就有利于开发。</span><br><span class="line">2.将网络的通信过程划分为小一些、简单一些的部件，因此有助于各个部件的开发、设计和故障排除。</span><br><span class="line">3.通过网络组件的标准化，允许多个供应商进行开发。</span><br><span class="line">4.通过定义在模型的每一层实现什么功能，鼓励产业的标准化。</span><br><span class="line">5.允许各种类型的网络硬件和软件相互通信。</span><br><span class="line">各层可以独立开发，上层为下层提供服务</span><br></pre></td></tr></table></figure>

<h2 id="ipv4"><a href="#ipv4" class="headerlink" title="ipv4"></a>ipv4</h2><p>网络号+主机号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">IP地址</span><br><span class="line">	分类</span><br><span class="line">		A类 0</span><br><span class="line">			私有地址：10.0.0.0</span><br><span class="line">			0-126</span><br><span class="line">		B类  10</span><br><span class="line">			私有地址 172.16.0.0</span><br><span class="line">					172.31.255.255</span><br><span class="line">			128-191</span><br><span class="line">		C类 110</span><br><span class="line">			私有地址 192.168.0.0</span><br><span class="line">			192-223</span><br><span class="line">		D类  1110</span><br><span class="line">			224-239</span><br><span class="line">			多为多播寻址保留</span><br><span class="line">		E 类 11110</span><br><span class="line">			240-254</span><br><span class="line">			为实验性应用保留</span><br><span class="line">		全1广播 </span><br><span class="line">			到指定网段广播</span><br><span class="line">	表示方式</span><br><span class="line">		点分十进制</span><br><span class="line">		二进制</span><br><span class="line">		16进制</span><br><span class="line">	路由汇聚</span><br><span class="line">		CIDR无类域间路由</span><br><span class="line">	子网划分</span><br><span class="line">		VLSM(可变长子网掩码</span><br><span class="line">		子网地址</span><br><span class="line">			主机地址和子网掩码安位相与所得</span><br></pre></td></tr></table></figure>

<h6 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h6><p>网络号借用主机号实现合理利用IP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">借位 		 块个数 			块大小 	  子网</span><br><span class="line">1			2				128			128</span><br><span class="line">2			4				64			192</span><br><span class="line">3			8				32			224</span><br><span class="line">4			16				16			240</span><br></pre></td></tr></table></figure>

<h6 id="路由聚合"><a href="#路由聚合" class="headerlink" title="路由聚合"></a>路由聚合</h6><p>将小的分散的网络汇聚成一个大的方便存储</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">先找到相同的2进制序列 然后不同的放入一个可以容纳的模块 最后将不同的变为0</span><br><span class="line">例如 </span><br><span class="line">192.168.144.0/24</span><br><span class="line">192.168.159.0/24</span><br><span class="line">转为2进制</span><br><span class="line">192.168.1001 0000.0</span><br><span class="line">192.168.1001 1111.0</span><br><span class="line">相同的为192.168.144</span><br><span class="line">后面为0和15即模块大小为16</span><br><span class="line">所以聚合为192.168.144.0/20 （借4位）</span><br></pre></td></tr></table></figure>


    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/思科设备/">#思科设备</a> <a href="/tags/路由协议/">#路由协议</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2019/08/07/网络/">网络</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/08/07/sql注入的基础/">Sql注入</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>